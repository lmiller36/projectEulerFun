<html>
<!-- <script src="bundle.js"></script>
<object width="300" height="300" type="text/plain" data="message.txt" border="0" >
</object> -->
<script type="text/javascript">
	var typesDict = [{},{},{},{},{},{}];
	var typesList = [[],[],[],[],[],[]];
	var starts = [{},{},{},{},{},{}];
	var allStarts = {};
	for(var i = 1;i <= 140;i++){
		var tri = i * ( i + 1) / 2;
		var sq = i * i;
		var pent = i * (3*i - 1) / 2;
		var hex = i * (2*i - 1);
		var hep = i * (5*i - 3) / 2;
		var oct = i * (3*i -2);
		addNum(tri, 0,i);
		addNum(sq,  1,i);
		addNum(pent,2,i);
		addNum(hex, 3,i);
		addNum(hep, 4,i);
		addNum(oct, 5,i);

	}

	console.log(typesDict);
	console.log(typesList);
	console.log(starts);
	console.log(allStarts);

	var allStartsKeys = Object.keys(allStarts);
	console.log(allStartsKeys);
	for(var i = 0; i < allStartsKeys.length; i++){
		var key = allStartsKeys[i];
		followTrail(key,"","");
		// var posWithStartNumber = Object.keys(allStarts[key]);

		// for(var j)
	}

	function followTrail(current,seen,numbers){
		// console.log(current+" "+seen);
		if(seen.length == 6){
			if(numbers.substring(1,3) == numbers.substring(numbers.length -2)){
				console.log("here:"+current+" "+seen+" "+numbers);
				console.log(numbers.split("_"));
			}


		}
		if(current == null) return null
			if(!allStarts[current])return null;
		var posWithStartNumber = Object.keys(allStarts[current]);
		// console.log(posWithStartNumber);
		for(var i = 0; i < posWithStartNumber.length;i++){
			var pos = posWithStartNumber[i];
			var curr = seen+""+pos;
			if(seen.indexOf(pos) == -1)
			{
				if(!starts[pos][current]) return null;
				// console.log(starts[pos][current]);
				for(var j in starts[pos][current]){
					var ending = starts[pos][current][j];
					// console.log(current+ending+" "+pos)
					// console.log(ending+" "+curr);
					// console.log(ending);
					var x = followTrail(ending,curr,numbers+"_"+current+ending);
					// console.log(x);
				}
			}
		}

		return null;
	}



	function addNum(num,pos,i){
		if(num >= 1000 && num < 10000){
			typesDict[pos][num] = i;
			typesList[pos].push(num);
			var firstTwo = (num+"").substring(0,2);
			if(!starts[pos][firstTwo])starts[pos][firstTwo] = [];
			if(!allStarts[firstTwo])allStarts[firstTwo] = {};
			starts[pos][firstTwo].push((num+"").substring(2));
			allStarts[firstTwo][pos]=1;
		}
	}
</script>

</html>